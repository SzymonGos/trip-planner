// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                       String    @id @default(cuid())
  clerkId                  String    @unique @default("")
  username                 String    @unique @default("")
  email                    String    @default("")
  profileImage             Json?
  deletedAt                DateTime?
  isDeleted                Boolean   @default(false)
  googleMapsRouteCount     Int?      @default(0)
  googleMapsRouteResetDate DateTime? @default(now())
  aiChatUsageCount         Int?      @default(0)
  aiChatUsageResetDate     DateTime? @default(now())
  from_Trip_creator        Trip[]    @relation("Trip_creator")
}

model Trip {
  id                String         @id @default(cuid())
  title             String         @default("")
  description       String         @default("") @postgresql.Text
  origin            String         @default("")
  destination       String         @default("")
  creator           User?          @relation("Trip_creator", fields: [creatorId], references: [id])
  creatorId         String?        @map("creator")
  status            TripStatusType @default(planning)
  tripImages        TripImage[]    @relation("TripImage_trip")
  distance          String         @default("")
  estimatedDuration String         @default("")
  createdAt         DateTime?      @default(now())

  @@index([creatorId])
}

model TripImage {
  id     String  @id @default(cuid())
  image  Json?
  trip   Trip?   @relation("TripImage_trip", fields: [tripId], references: [id])
  tripId String? @map("trip")

  @@index([tripId])
}

enum TripStatusType {
  planning
  completed
}
